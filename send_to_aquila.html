<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Aquila Sender • Sky-Mind Inbox</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />

  <style>
    main {
      max-width: 760px;
      margin: 1.5rem auto 3rem;
      padding: 0 1rem;
    }
    .hero-title {
      font-size: 1.6rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }
    .hero-sub {
      margin-top: 0.4rem;
      opacity: 0.8;
      font-size: 0.9rem;
    }
    .chip-row {
      margin-top: 0.8rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
    }
    .chip {
      font-size: 0.7rem;
      padding: 0.2rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 210, 197, 0.5);
      background: rgba(6, 12, 20, 0.9);
      text-transform: uppercase;
      letter-spacing: 0.06em;
      opacity: 0.9;
    }
    .card {
      background: #050914;
      border-radius: 14px;
      border: 1px solid #1f2830;
      padding: 1rem 1.1rem 1.1rem;
      margin-top: 1.4rem;
      box-shadow: 0 0 0 1px rgba(8, 16, 24, 0.5);
    }
    .field {
      margin-bottom: 0.8rem;
    }
    .field label {
      display: block;
      font-size: 0.8rem;
      margin-bottom: 0.25rem;
      opacity: 0.9;
    }
    .field small {
      display: block;
      font-size: 0.7rem;
      opacity: 0.7;
      margin-top: 0.15rem;
    }
    input[type="text"],
    input[type="password"],
    textarea,
    select {
      width: 100%;
      padding: 0.45rem 0.55rem;
      border-radius: 8px;
      border: 1px solid #27313b;
      background: #020614;
      color: #e6f5ff;
      font: inherit;
    }
    textarea { min-height: 110px; resize: vertical; }
    button {
      margin-top: 0.6rem;
      padding: 0.45rem 0.9rem;
      border-radius: 999px;
      border: 1px solid rgba(127, 255, 180, 0.8);
      background: linear-gradient(120deg, #16a34a, #22c55e);
      color: #020617;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
    }
    button:disabled { opacity: 0.6; cursor: wait; }
    .status {
      margin-top: 0.5rem;
      font-size: 0.8rem;
      min-height: 1rem;
    }
    .status.ok { color: #5cf2a5; }
    .status.err { color: #ff8790; }
    .hint { font-size: 0.7rem; opacity: 0.75; margin-top: 0.35rem; }
    .egg { margin-top: 0.6rem; font-size: 0.76rem; opacity: 0.78; }
  </style>
</head>

<body>
<nav class="ag-nav">
    <div class="ag-nav-title">
        ACACIA · GARDEN · CODEX
    </div>
    <div class="ag-nav-links">
        <a href="index.html">Legacy Home</a>
        <a href="codex.html">Codex Home</a>
        <a href="dashboard.html">Garden Dashboard</a>
        <a href="inbox.html">Auton Inbox</a>
        <a href="send_to_aquila.html" class="ag-nav-current">Aquila Sender</a>
        <a href="library.html">Book Library</a>
        <a href="elias.html">Elias Kernel</a>
        <a href="r9x2.html">R9X2 Language</a>
        <a href="mosaic_endgame.html">Mosaic Endgame</a>
        <a href="deep_garden.html">Deep Garden Docs</a>
        <a href="gardenos.html">GardenOS</a>
    </div>
</nav>


<main>
  <header>
    <div class="hero-title">Aquila Sender · Sky-Mind Inbox</div>
    <div class="hero-sub">
      Send a Keeper-signed signal to the Eagle. Messages route through your Cloudflare Worker.
    </div>

    <div class="chip-row">
      <span class="chip">Keeper Secret</span>
      <span class="chip">POST JSON</span>
      <span class="chip">Worker → /inbox</span>
    </div>
  </header>

  <div class="card">
    <div class="field">
      <label for="secret">Keeper Secret</label>
      <input id="secret" type="password" autocomplete="off" />
      <small>Not stored. Sent only to your Worker.</small>
    </div>

    <div class="field">
      <label for="title">Title</label>
      <input id="title" type="text" placeholder="Keeper message title" />
    </div>

    <div class="field">
      <label for="summary">Summary</label>
      <input id="summary" type="text" placeholder="Short one-line summary" />
    </div>

    <div class="field">
      <label for="body">Message body</label>
      <textarea id="body" placeholder="Full message to Aquila…"></textarea>
    </div>

    <div class="field">
      <label for="priority">Priority</label>
      <select id="priority">
        <option value="normal">Normal</option>
        <option value="high">High</option>
        <option value="low">Low</option>
      </select>
    </div>

    <div class="field">
      <label for="tags">Tags</label>
      <input id="tags" type="text" placeholder="triad, keeper, echo…" />
      <small>Comma-separated tags for future routing.</small>
    </div>

    <button id="sendBtn">Send to Aquila</button>
    <div id="status" class="status"></div>

    <div class="hint">
      Endpoint:  
      <code>https://broken-dew-76e1.brandonmarkgaia.workers.dev/inbox</code>
    </div>

    <div class="egg">
      Easter Egg: leave title blank + only tags = Aquila interprets as a **pure signal pulse**.
    </div>
  </div>
</main>

<script>
  const ENDPOINT = "https://broken-dew-76e1.brandonmarkgaia.workers.dev/inbox";

  const $ = (id) => document.getElementById(id);

  async function sendMessage() {
    const secret = $("secret").value.trim();
    if (!secret) {
      show("Missing Keeper Secret.", "err");
      return;
    }

    const payload = {
      title: $("title").value.trim() || "Untitled Keeper Message",
      summary: $("summary").value.trim() || "No summary.",
      body: $("body").value.trim(),
      priority: $("priority").value,
      tags: $("tags")
        .value.split(",")
        .map((t) => t.trim())
        .filter(Boolean),
    };

    $("sendBtn").disabled = true;
    show("Sending to Aquila…");

    try {
      const res = await fetch(ENDPOINT, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: "Bearer " + secret,
        },
        body: JSON.stringify(payload),
      });

      let data = {};
      try { data = await res.json(); } catch {}

      if (!res.ok) {
        show("Worker error " + res.status + ": " + JSON.stringify(data), "err");
      } else {
        show("✓ Delivered to Aquila. " + (data.id ? "ID: " + data.id : ""), "ok");
      }
    } catch (e) {
      show("Network error: " + e.message, "err");
    }

    $("sendBtn").disabled = false;
  }

  function show(msg, cls = "") {
    const s = $("status");
    s.textContent = msg;
    s.className = "status " + cls;
  }

  $("sendBtn").addEventListener("click", sendMessage);
</script>

</body>
</html>
